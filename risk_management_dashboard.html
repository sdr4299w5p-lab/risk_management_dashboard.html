<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6d6d6d; -webkit-text-stroke: #6d6d6d}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6b0001; -webkit-text-stroke: #6b0001}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #fb0007; -webkit-text-stroke: #fb0007}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #0000ff; -webkit-text-stroke: #0000ff}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; -webkit-text-stroke: #000000}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #18702b; -webkit-text-stroke: #18702b}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #4d5055; -webkit-text-stroke: #4d5055}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #093c94; -webkit-text-stroke: #093c94}
    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; -webkit-text-stroke: #000000; min-height: 16.0px}
    p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #18702b; -webkit-text-stroke: #18702b; min-height: 16.0px}
    span.s1 {font-kerning: none; background-color: #ecf1f7}
    span.s2 {font-kerning: none; color: #fb0007; background-color: #ecf1f7; -webkit-text-stroke: 0px #fb0007}
    span.s3 {font-kerning: none; color: #2a2a2a; background-color: #ecf1f7; -webkit-text-stroke: 0px #2a2a2a}
    span.s4 {font-kerning: none; color: #000000; background-color: #ecf1f7; -webkit-text-stroke: 0px #000000}
    span.s5 {font-kerning: none; color: #0000ff; background-color: #ecf1f7; -webkit-text-stroke: 0px #0000ff}
    span.s6 {font-kerning: none; color: #6b0001; background-color: #ecf1f7; -webkit-text-stroke: 0px #6b0001}
    span.s7 {font-kerning: none; color: #6f0ec3; background-color: #ecf1f7; -webkit-text-stroke: 0px #6f0ec3}
    span.s8 {font-kerning: none; color: #093c94; background-color: #ecf1f7; -webkit-text-stroke: 0px #093c94}
    span.s9 {font-kerning: none; color: #18702b; background-color: #ecf1f7; -webkit-text-stroke: 0px #18702b}
    span.s10 {font-kerning: none; color: #137646; background-color: #ecf1f7; -webkit-text-stroke: 0px #137646}
    span.s11 {font-kerning: none}
    span.s12 {font-kerning: none; color: #a4450b; background-color: #ecf1f7; -webkit-text-stroke: 0px #a4450b}
    span.s13 {font-kerning: none; color: #4d5055; background-color: #ecf1f7; -webkit-text-stroke: 0px #4d5055}
    span.s14 {font-kerning: none; color: #0e6e6d; background-color: #ecf1f7; -webkit-text-stroke: 0px #0e6e6d}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE</span><span class="s2"> html</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3">&lt;</span><span class="s1">html</span><span class="s4"> </span><span class="s2">lang</span><span class="s3">=</span><span class="s5">"en"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s3">&lt;</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s1">charset</span><span class="s3">=</span><span class="s5">"UTF-8"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"viewport"</span><span class="s4"> </span><span class="s2">content</span><span class="s3">=</span><span class="s1">"width=device-width, initial-scale=1.0"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">title</span><span class="s3">&gt;</span><span class="s1">H&amp;S Risk Management Dashboard</span><span class="s3">&lt;/</span><span class="s6">title</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.tailwindcss.com"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">@import</span><span class="s4"> </span><span class="s8">url</span><span class="s4">(</span><span class="s1">'https://fonts.googleapis.com/css2?family=Inter:wght@100..900&amp;display=swap'</span><span class="s4">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">body</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">font-family:</span><span class="s1"> </span><span class="s9">'Inter'</span><span class="s1">, </span><span class="s8">sans-serif</span><span class="s1">;</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">background-color:</span><span class="s4"> </span><span class="s8">#f8fafc</span><span class="s4">; </span><span class="s1">/* Light gray background */</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">/* Custom scrollbar for better look */</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">::-webkit-scrollbar</span><span class="s4"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">width:</span><span class="s1"> </span><span class="s10">8px</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">::-webkit-scrollbar-thumb</span><span class="s4"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">background:</span><span class="s1"> </span><span class="s8">#cbd5e1</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border-radius:</span><span class="s1"> </span><span class="s10">4px</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s6">.risk-medium</span><span class="s4"> { </span><span class="s1">background-color:</span><span class="s4"> </span><span class="s8">#fef3c7</span><span class="s4">; </span><span class="s1">border-left:</span><span class="s4"> </span><span class="s10">4px</span><span class="s4"> </span><span class="s8">solid</span><span class="s4"> </span><span class="s8">#f59e0b</span><span class="s4">; }</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s6">.risk-high</span><span class="s4"> { </span><span class="s1">background-color:</span><span class="s4"> </span><span class="s8">#fee2e2</span><span class="s4">; </span><span class="s1">border-left:</span><span class="s4"> </span><span class="s10">4px</span><span class="s4"> </span><span class="s8">solid</span><span class="s4"> </span><span class="s8">#ef4444</span><span class="s4">; }</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s6">.action-ongoing</span><span class="s4"> { </span><span class="s1">background-color:</span><span class="s4"> </span><span class="s8">#eff6ff</span><span class="s4">; </span><span class="s1">border:</span><span class="s4"> </span><span class="s10">1px</span><span class="s4"> </span><span class="s8">solid</span><span class="s4"> </span><span class="s8">#93c5fd</span><span class="s4">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.modal</span><span class="s1"> {</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">transition:</span><span class="s4"> </span><span class="s1">opacity</span><span class="s4"> </span><span class="s10">0.3s</span><span class="s4"> </span><span class="s1">ease-out</span><span class="s4">, </span><span class="s1">visibility</span><span class="s4"> </span><span class="s10">0.3s</span><span class="s4"> </span><span class="s1">ease-out</span><span class="s4">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.modal-content</span><span class="s4"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">transform:</span><span class="s1"> </span><span class="s8">scale(</span><span class="s10">0.95</span><span class="s8">)</span><span class="s1">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">transition:</span><span class="s4"> </span><span class="s1">transform</span><span class="s4"> </span><span class="s10">0.3s</span><span class="s4"> </span><span class="s1">ease-out</span><span class="s4">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.modal:not</span><span class="s4">(</span><span class="s1">.hidden</span><span class="s4">) </span><span class="s1">.modal-content</span><span class="s4"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">transform:</span><span class="s1"> </span><span class="s8">scale(</span><span class="s10">1</span><span class="s8">)</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s3">&lt;/</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s3">&lt;</span><span class="s6">body</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-4 sm:p-8"</span><span class="s3">&gt;</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">header</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"mb-8"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">h1</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-4xl font-extrabold text-gray-800 mb-2"</span><span class="s3">&gt;</span><span class="s4">Facility Risk Management Dashboard</span><span class="s3">&lt;/</span><span class="s6">h1</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-lg text-gray-600"</span><span class="s3">&gt;</span><span class="s1">Portishead Open Air Pool and Cafe H&amp;S Plan (October 2025)</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">header</span><span class="s3">&gt;</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- Filter/Search Control for Registers --&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mb-6 flex flex-col sm:flex-row gap-4"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">select</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"risk-filter"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-sky-500 focus:border-sky-500 w-full sm:w-1/3 transition duration-150"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">option</span><span class="s1"> </span><span class="s2">value</span><span class="s3">=</span><span class="s5">"all"</span><span class="s3">&gt;</span><span class="s1">Show All Risks</span><span class="s3">&lt;/</span><span class="s6">option</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">option</span><span class="s1"> </span><span class="s2">value</span><span class="s3">=</span><span class="s5">"high"</span><span class="s3">&gt;</span><span class="s1">High Risk Only (11+)</span><span class="s3">&lt;/</span><span class="s6">option</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">option</span><span class="s1"> </span><span class="s2">value</span><span class="s3">=</span><span class="s5">"medium"</span><span class="s3">&gt;</span><span class="s1">Medium Risk Only (6-10)</span><span class="s3">&lt;/</span><span class="s6">option</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">select</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">input</span><span class="s4"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"text"</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"action-search"</span><span class="s4"> </span><span class="s2">placeholder</span><span class="s3">=</span><span class="s1">"Search Actions by Responsibility or Ref..."</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-sky-500 focus:border-sky-500 w-full sm:w-2/3 transition duration-150"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- Risk Register Section --&gt;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">section</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"mb-10"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">h2</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-3xl font-bold text-gray-700 mb-4 border-b pb-2"</span><span class="s3">&gt;</span><span class="s4">1. Risk Register (Residual Risk)</span><span class="s3">&lt;/</span><span class="s6">h2</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"risk-register-container"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;!-- Risk cards will be injected here by JavaScript --&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mt-6 p-4 rounded-lg bg-gray-100 shadow-inner"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">h3</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"font-semibold text-gray-800 mb-2"</span><span class="s3">&gt;</span><span class="s4">Risk Rating Key:</span><span class="s3">&lt;/</span><span class="s6">h3</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">ul</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-sm text-gray-600 space-y-1"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">li</span><span class="s3">&gt;&lt;</span><span class="s6">span</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"inline-block w-3 h-3 rounded-full mr-2 bg-green-500"</span><span class="s3">&gt;&lt;/</span><span class="s6">span</span><span class="s3">&gt;</span><span class="s4"> 1-5 (Low)</span><span class="s3">&lt;/</span><span class="s6">li</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">li</span><span class="s3">&gt;&lt;</span><span class="s6">span</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"inline-block w-3 h-3 rounded-full mr-2 bg-amber-500"</span><span class="s3">&gt;&lt;/</span><span class="s6">span</span><span class="s3">&gt;</span><span class="s4"> 6-10 (Medium)</span><span class="s3">&lt;/</span><span class="s6">li</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">li</span><span class="s3">&gt;&lt;</span><span class="s6">span</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"inline-block w-3 h-3 rounded-full mr-2 bg-red-500"</span><span class="s3">&gt;&lt;/</span><span class="s6">span</span><span class="s3">&gt;</span><span class="s4"> 11-15 (High)</span><span class="s3">&lt;/</span><span class="s6">li</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">li</span><span class="s3">&gt;&lt;</span><span class="s6">span</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"inline-block w-3 h-3 rounded-full mr-2 bg-gray-500"</span><span class="s3">&gt;&lt;/</span><span class="s6">span</span><span class="s3">&gt;</span><span class="s1"> 16-25 (Extreme) - *None currently assessed*</span><span class="s3">&lt;/</span><span class="s6">li</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">ul</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">section</span><span class="s3">&gt;</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- Action Plan Section --&gt;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">section</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"mb-10"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">h2</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-3xl font-bold text-gray-700 mb-4 border-b pb-2"</span><span class="s3">&gt;</span><span class="s4">2. Risk Prioritisation and Action Plan</span><span class="s3">&lt;/</span><span class="s6">h2</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"action-plan-container"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"space-y-4"</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;!-- Action cards will be injected here by JavaScript --&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">section</span><span class="s3">&gt;</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- Review and Monitoring Section --&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">section</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mb-8 p-6 bg-white rounded-xl shadow-lg border-t-4 border-sky-500"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">h2</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-2xl font-bold text-sky-700 mb-3"</span><span class="s3">&gt;</span><span class="s4">Review and Monitoring</span><span class="s3">&lt;/</span><span class="s6">h2</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">ul</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"list-disc pl-5 text-gray-700 space-y-2"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">li</span><span class="s3">&gt;</span><span class="s1">**Monthly:** By the Duty Supervisor.</span><span class="s3">&lt;/</span><span class="s6">li</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">li</span><span class="s3">&gt;</span><span class="s1">**Quarterly:** By the Senior Management Team.</span><span class="s3">&lt;/</span><span class="s6">li</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">li</span><span class="s3">&gt;</span><span class="s1">**Immediately:** Following any incident or significant operational change.</span><span class="s3">&lt;/</span><span class="s6">li</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">ul</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"mt-3 text-sm italic text-gray-500"</span><span class="s3">&gt;</span><span class="s1">All completed actions must be signed off by the responsible person and verified by the Operations Manager.</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">section</span><span class="s3">&gt;</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- Policy Generation Modal --&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"policy-modal"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"modal hidden fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-75"</span><span class="s4"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"closePolicyModal()"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"modal-content bg-white w-11/12 md:max-w-3xl mx-auto rounded-xl shadow-2xl overflow-y-auto max-h-[90vh]"</span><span class="s4"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"event.stopPropagation()"</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;!-- Modal Header --&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex justify-between items-center p-5 border-b border-gray-200 sticky top-0 bg-white rounded-t-xl"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">h3</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"policy-modal-title"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-2xl font-extrabold text-indigo-700"</span><span class="s3">&gt;</span><span class="s4">Policy Draft</span><span class="s3">&lt;/</span><span class="s6">h3</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"closePolicyModal()"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-gray-400 hover:text-gray-700 transition duration-150"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">svg</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-6 h-6"</span><span class="s4"> </span><span class="s2">fill</span><span class="s3">=</span><span class="s1">"none"</span><span class="s4"> </span><span class="s2">stroke</span><span class="s3">=</span><span class="s1">"currentColor"</span><span class="s4"> </span><span class="s2">viewBox</span><span class="s3">=</span><span class="s1">"0 0 24 24"</span><span class="s4"> </span><span class="s2">xmlns</span><span class="s3">=</span><span class="s1">"http://www.w3.org/2000/svg"</span><span class="s3">&gt;&lt;</span><span class="s6">path</span><span class="s4"> </span><span class="s2">stroke-linecap</span><span class="s3">=</span><span class="s1">"round"</span><span class="s4"> </span><span class="s2">stroke-linejoin</span><span class="s3">=</span><span class="s1">"round"</span><span class="s4"> </span><span class="s2">stroke-width</span><span class="s3">=</span><span class="s1">"2"</span><span class="s4"> </span><span class="s2">d</span><span class="s3">=</span><span class="s1">"M6 18L18 6M6 6l12 12"</span><span class="s3">&gt;&lt;/</span><span class="s6">path</span><span class="s3">&gt;&lt;/</span><span class="s6">svg</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;!-- Modal Body (Output Area) --&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"policy-output"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-6"</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;!-- LLM Content will be injected here --&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;!-- Modal Footer --&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-4 border-t border-gray-200 text-right sticky bottom-0 bg-white rounded-b-xl"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"closePolicyModal()"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg transition duration-150"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>Close</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// --- Data Definitions ---</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">const</span><span class="s1"> riskRegisterData = [</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>{ ref: </span><span class="s1">"P-01"</span><span class="s4">, hazard: </span><span class="s1">"Drowning/Near-Drowning (Pool Area)"</span><span class="s4">, atRisk: </span><span class="s1">"Users, especially children and non-swimmers"</span><span class="s4">, controls: </span><span class="s1">"Qualified Lifeguards (NPLQ), CCTV, Safety signage, Depth markers, First Aid kit readily available."</span><span class="s4">, likelihood: </span><span class="s12">2</span><span class="s4">, severity: </span><span class="s12">5</span><span class="s4">, score: </span><span class="s12">10</span><span class="s4">, recommendedAction: </span><span class="s1">"Implement hourly documented checks of lifeguard rotation/rest periods. Conduct scenario-based emergency drills monthly."</span><span class="s4">, rating: </span><span class="s1">"Medium"</span><span class="s4"> },</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>{ ref: </span><span class="s1">"P-02"</span><span class="s4">, hazard: </span><span class="s1">"Slips, Trips, and Falls (Wet Poolside/Changing Rooms)"</span><span class="s4">, atRisk: </span><span class="s1">"All users and staff"</span><span class="s4">, controls: </span><span class="s1">"Anti-slip matting in changing areas, 'Wet Floor' signage, regular staff mop-up, well-lit pathways."</span><span class="s4">, likelihood: </span><span class="s12">4</span><span class="s4">, severity: </span><span class="s12">3</span><span class="s4">, score: </span><span class="s12">12</span><span class="s4">, recommendedAction: </span><span class="s1">"Introduce dedicated 'Poolside Patrol' role during peak hours to ensure rapid water clearance and enforcement of no-running rules."</span><span class="s4">, rating: </span><span class="s1">"High"</span><span class="s4"> },</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>{ ref: </span><span class="s1">"C-01"</span><span class="s4">, hazard: </span><span class="s1">"Hot Surface Burns/Scalds (Café Kitchen/Service Area)"</span><span class="s4">, atRisk: </span><span class="s1">"Café staff, Public (service counter)"</span><span class="s4">, controls: </span><span class="s1">"Staff PPE (gloves/aprons), 'Caution Hot Surface' signage, separate staff training for hot equipment (fryers, coffee machine)."</span><span class="s4">, likelihood: </span><span class="s12">3</span><span class="s4">, severity: </span><span class="s12">4</span><span class="s4">, score: </span><span class="s12">12</span><span class="s4">, recommendedAction: </span><span class="s1">"Review kitchen layout to clearly define 'hot zones' and install physical barriers (sneeze guards) at the service counter."</span><span class="s4">, rating: </span><span class="s1">"High"</span><span class="s4"> },</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>{ ref: </span><span class="s1">"C-02"</span><span class="s4">, hazard: </span><span class="s1">"Food Poisoning/Allergies (Café)"</span><span class="s4">, atRisk: </span><span class="s1">"Customers"</span><span class="s4">, controls: </span><span class="s1">"HACCP plan in place, temperature monitoring of refrigeration/cooking, documented allergen matrix, staff hygiene training."</span><span class="s4">, likelihood: </span><span class="s12">2</span><span class="s4">, severity: </span><span class="s12">4</span><span class="s4">, score: </span><span class="s12">8</span><span class="s4">, recommendedAction: </span><span class="s1">"Conduct external, independent food hygiene audit (Level 5 requirement) quarterly. All staff refresh allergen training annually."</span><span class="s4">, rating: </span><span class="s1">"Medium"</span><span class="s4"> },</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>{ ref: </span><span class="s1">"G-01"</span><span class="s4">, hazard: </span><span class="s1">"Heat Exhaustion/Sunburn (Outdoor areas)"</span><span class="s4">, atRisk: </span><span class="s1">"All users, especially children/elderly, outdoor staff"</span><span class="s4">, controls: </span><span class="s1">"Provision of shaded areas (umbrellas/awnings), availability of free water refills, sun cream recommended on site, staff monitoring."</span><span class="s4">, likelihood: </span><span class="s12">4</span><span class="s4">, severity: </span><span class="s12">2</span><span class="s4">, score: </span><span class="s12">8</span><span class="s4">, recommendedAction: </span><span class="s1">"Mandate staff breaks in shaded/cool areas. Ensure all staff carry VHF radio for immediate medical assistance requests."</span><span class="s4">, rating: </span><span class="s1">"Medium"</span><span class="s4"> },</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>{ ref: </span><span class="s1">"G-02"</span><span class="s4">, hazard: </span><span class="s1">"Chemical Exposure (Plant Room/Cleaning)"</span><span class="s4">, atRisk: </span><span class="s1">"Maintenance staff, cleaning staff"</span><span class="s4">, controls: </span><span class="s1">"COSHH risk assessment and data sheets available, locked plant room access (restricted to authorised staff), correct PPE usage."</span><span class="s4">, likelihood: </span><span class="s12">1</span><span class="s4">, severity: </span><span class="s12">5</span><span class="s4">, score: </span><span class="s12">5</span><span class="s4">, recommendedAction: </span><span class="s1">"Verify all chemical storage (including pool chlorine) is fully bunded and segregated."</span><span class="s4">, rating: </span><span class="s1">"Low"</span><span class="s4"> },</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>{ ref: </span><span class="s1">"G-03"</span><span class="s4">, hazard: </span><span class="s1">"Vandalism/Security Incident (Out of Hours)"</span><span class="s4">, atRisk: </span><span class="s1">"Staff, property"</span><span class="s4">, controls: </span><span class="s1">"Monitored CCTV, secure perimeter fencing, alarm system, clear lockdown procedures."</span><span class="s4">, likelihood: </span><span class="s12">3</span><span class="s4">, severity: </span><span class="s12">3</span><span class="s4">, score: </span><span class="s12">9</span><span class="s4">, recommendedAction: </span><span class="s1">"Implement a documented, two-person end-of-day security sweep checklist."</span><span class="s4">, rating: </span><span class="s1">"Medium"</span><span class="s4"> },</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// --- NEW FIRE RISKS (F-xx) based on FRA ---</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>{ ref: </span><span class="s1">"F-01"</span><span class="s4">, hazard: </span><span class="s1">"Electrical Fire (Plant/Pump Room)"</span><span class="s4">, atRisk: </span><span class="s1">"Maintenance staff, Property, Business Continuity"</span><span class="s4">, controls: </span><span class="s1">"Fixed wiring checks (5-yearly), accessible CO2 extinguishers, clearly marked isolation switches, clean environment."</span><span class="s4">, likelihood: </span><span class="s12">2</span><span class="s4">, severity: </span><span class="s12">5</span><span class="s4">, score: </span><span class="s12">10</span><span class="s4">, recommendedAction: </span><span class="s1">"Mandate annual specialist training for relevant staff on electrical fire response (isolation and extinguisher use)."</span><span class="s4">, rating: </span><span class="s1">"Medium"</span><span class="s4"> },</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>{ ref: </span><span class="s1">"F-02"</span><span class="s4">, hazard: </span><span class="s1">"Fire Spread via Flammable Storage (Wooden Annex)"</span><span class="s4">, atRisk: </span><span class="s1">"Public (Exit routes), Staff, Property (Wooden Foyer)"</span><span class="s4">, controls: </span><span class="s1">"Fire doors (assumed functional), smoke detection (assumed functional L4/L5), locked storage cupboard."</span><span class="s4">, likelihood: </span><span class="s12">3</span><span class="s4">, severity: </span><span class="s12">4</span><span class="s4">, score: </span><span class="s12">12</span><span class="s4">, recommendedAction: </span><span class="s1">"Immediately relocate all flammable aerosols and sanitisers bulk storage into a dedicated, fire-rated COSHH cabinet, away from the wooden annex/foyer."</span><span class="s4">, rating: </span><span class="s1">"High"</span><span class="s4"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>];</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">const</span><span class="s1"> actionPlanData = [</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>{ ref: </span><span class="s1">"P-02"</span><span class="s4">, hazard: </span><span class="s1">"Slips, Trips, and Falls (Poolside)"</span><span class="s4">, action: </span><span class="s1">"Install additional, clearly marked non-slip rubber matting around high-traffic entrance/exit points to changing rooms and cafe."</span><span class="s4">, responsibility: </span><span class="s1">"Operations Manager"</span><span class="s4">, targetDate: </span><span class="s1">"30 Days"</span><span class="s4">, status: </span><span class="s1">"Open"</span><span class="s4"> },</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>{ ref: </span><span class="s1">"P-02"</span><span class="s4">, hazard: </span><span class="s1">"Slips, Trips, and Falls (Poolside)"</span><span class="s4">, action: </span><span class="s1">"Implement and document a 'Poolside Safety Watch' protocol requiring staff to check and record floor conditions every 15 minutes during peak operation."</span><span class="s4">, responsibility: </span><span class="s1">"Duty Supervisor"</span><span class="s4">, targetDate: </span><span class="s1">"Ongoing (Immediate Start)"</span><span class="s4">, status: </span><span class="s1">"Open"</span><span class="s4"> },</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>{ ref: </span><span class="s1">"C-01"</span><span class="s4">, hazard: </span><span class="s1">"Hot Surface Burns/Scalds (Café)"</span><span class="s4">, action: </span><span class="s1">"Procure and install extended-reach serving tongs and utensils to minimise staff proximity to hot oil/grills."</span><span class="s4">, responsibility: </span><span class="s1">"Café Manager"</span><span class="s4">, targetDate: </span><span class="s1">"45 Days"</span><span class="s4">, status: </span><span class="s1">"Open"</span><span class="s4"> },</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>{ ref: </span><span class="s1">"C-01"</span><span class="s4">, hazard: </span><span class="s1">"Hot Surface Burns/Scalds (Café)"</span><span class="s4">, action: </span><span class="s1">"All new café staff to receive mandatory practical burn prevention and first aid training (in addition to standard induction)."</span><span class="s4">, responsibility: </span><span class="s1">"H&amp;S Coordinator"</span><span class="s4">, targetDate: </span><span class="s1">"Ongoing"</span><span class="s4">, status: </span><span class="s1">"Open"</span><span class="s4"> },</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>{ ref: </span><span class="s1">"P-01"</span><span class="s4">, hazard: </span><span class="s1">"Drowning/Near-Drowning"</span><span class="s4">, action: </span><span class="s1">"Schedule and execute a full simulation of a lost child/drowning scenario (including emergency service contact) for all staff, documented with debrief."</span><span class="s4">, responsibility: </span><span class="s1">"Lifeguard Lead"</span><span class="s4">, targetDate: </span><span class="s1">"60 Days"</span><span class="s4">, status: </span><span class="s1">"Open"</span><span class="s4"> },</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>{ ref: </span><span class="s1">"G-01"</span><span class="s4">, hazard: </span><span class="s1">"Heat Exhaustion/Sunburn"</span><span class="s4">, action: </span><span class="s1">"Erect a semi-permanent, high-UV-protection shade sail over the main café seating area."</span><span class="s4">, responsibility: </span><span class="s1">"Facilities Team"</span><span class="s4">, targetDate: </span><span class="s1">"90 Days"</span><span class="s4">, status: </span><span class="s1">"Open"</span><span class="s4"> },</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>{ ref: </span><span class="s1">"C-02"</span><span class="s4">, hazard: </span><span class="s1">"Food Poisoning/Allergies"</span><span class="s4">, action: </span><span class="s1">"Engage a certified external auditor to conduct a spot-check food hygiene assessment focused specifically on cross-contamination and chilling procedures."</span><span class="s4">, responsibility: </span><span class="s1">"Operations Manager"</span><span class="s4">, targetDate: </span><span class="s1">"45 Days"</span><span class="s4">, status: </span><span class="s1">"Open"</span><span class="s4"> },</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// --- NEW FIRE ACTIONS (F-xx) based on FRA ---</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>{ ref: </span><span class="s1">"F-01"</span><span class="s4">, hazard: </span><span class="s1">"Electrical Fire (Plant/Pump Room)"</span><span class="s4">, action: </span><span class="s1">"Conduct mandatory annual staff refresher training focused on emergency power isolation procedures and the correct use of CO2 fire extinguishers in the plant room."</span><span class="s4">, responsibility: </span><span class="s1">"Operations Manager / H&amp;S Coordinator"</span><span class="s4">, targetDate: </span><span class="s1">"30 Days"</span><span class="s4">, status: </span><span class="s1">"Open"</span><span class="s4"> },</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>{ ref: </span><span class="s1">"F-02"</span><span class="s4">, hazard: </span><span class="s1">"Fire Spread via Flammable Storage"</span><span class="s4">, action: </span><span class="s1">"Source and install an appropriate, fire-rated COSHH storage cabinet and relocate all bulk flammable liquids (aerosols, sanitisers) away from primary fire exit routes and the wooden annex."</span><span class="s4">, responsibility: </span><span class="s1">"Facilities Team / Manager"</span><span class="s4">, targetDate: </span><span class="s1">"60 Days"</span><span class="s4">, status: </span><span class="s1">"Open"</span><span class="s4"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>];</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// --- Gemini API Logic ---</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">const</span><span class="s4"> apiKey = </span><span class="s9">""</span><span class="s4">; </span><span class="s1">// Canvas will provide this key at runtime</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s13">/**</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">         </span>* Converts basic markdown-like syntax (like **bold** and list items) into simple HTML for better display.</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">         </span>* @param {string} text - The raw text output from the LLM.</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">         </span>* @returns {string} HTML formatted content.</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">function</span><span class="s1"> simpleMarkdownToHtml(text) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">if</span><span class="s1"> (!text) </span><span class="s7">return</span><span class="s1"> </span><span class="s9">''</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">let</span><span class="s1"> html = text.trim();</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Convert headings (assuming LLM uses #, ##)</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>html = html.replace(</span><span class="s6">/^### (.*)$/</span><span class="s7">gm</span><span class="s4">, </span><span class="s1">'&lt;h4 class="text-xl font-semibold mt-4 mb-2"&gt;$1&lt;/h4&gt;'</span><span class="s4">);</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>html = html.replace(</span><span class="s6">/^## (.*)$/</span><span class="s7">gm</span><span class="s4">, </span><span class="s1">'&lt;h3 class="text-2xl font-bold mt-5 mb-3 border-b pb-1 text-gray-800"&gt;$1&lt;/h3&gt;'</span><span class="s4">);</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>html = html.replace(</span><span class="s6">/^# (.*)$/</span><span class="s7">gm</span><span class="s4">, </span><span class="s1">'&lt;h2 class="text-3xl font-extrabold mt-6 mb-4 text-indigo-700"&gt;$1&lt;/h2&gt;'</span><span class="s4">);</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Convert lists (* or -)</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>html = html.replace(</span><span class="s6">/^- (.*)$/</span><span class="s7">gm</span><span class="s1">, </span><span class="s9">'&lt;li&gt;$1&lt;/li&gt;'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>html = html.replace(</span><span class="s6">/\* (.*)$/</span><span class="s7">gm</span><span class="s1">, </span><span class="s9">'&lt;li&gt;$1&lt;/li&gt;'</span><span class="s1">);</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>html = html.replace(</span><span class="s6">/(&lt;li&gt;.*&lt;\/li&gt;)/</span><span class="s7">gs</span><span class="s4">, </span><span class="s1">'&lt;ul class="list-disc pl-5 mb-4 space-y-1"&gt;$1&lt;/ul&gt;'</span><span class="s4">);</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Convert bold text</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>html = html.replace(</span><span class="s6">/\*\*(.*?)\*\*/</span><span class="s7">g</span><span class="s1">, </span><span class="s9">'&lt;strong&gt;$1&lt;/strong&gt;'</span><span class="s1">);</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Convert double newlines to paragraph tags</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>html = html.replace(</span><span class="s6">/\n\n/</span><span class="s7">g</span><span class="s1">, </span><span class="s9">'&lt;/p&gt;&lt;p&gt;'</span><span class="s1">);</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Wrap the whole content in a paragraph (handling the initial content)</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>html = </span><span class="s1">'&lt;p class="text-gray-700 leading-relaxed"&gt;'</span><span class="s4"> + html + </span><span class="s1">'&lt;/p&gt;'</span><span class="s4">;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Cleanup: remove any leading/trailing &lt;p&gt; tags from the lists/headings</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>html = html.replace(</span><span class="s6">/&lt;p&gt;&lt;ul&gt;/</span><span class="s7">g</span><span class="s1">, </span><span class="s9">'&lt;ul&gt;'</span><span class="s1">).replace(</span><span class="s6">/&lt;\/ul&gt;&lt;\/p&gt;/</span><span class="s7">g</span><span class="s1">, </span><span class="s9">'&lt;/ul&gt;'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>html = html.replace(</span><span class="s6">/&lt;p&gt;&lt;h/</span><span class="s7">g</span><span class="s1">, </span><span class="s9">'&lt;h'</span><span class="s1">).replace(</span><span class="s6">/&lt;\/h[1-6]&gt;&lt;\/p&gt;/</span><span class="s7">g</span><span class="s1">, </span><span class="s9">'&lt;/h&gt;'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>html = html.replace(</span><span class="s6">/^&lt;p&gt;/</span><span class="s1">, </span><span class="s9">''</span><span class="s1">).replace(</span><span class="s6">/&lt;\/p&gt;$/</span><span class="s1">, </span><span class="s9">''</span><span class="s1">);</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">return</span><span class="s1"> html;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s13">/**</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">         </span>* Calls the Gemini API to generate a draft safety policy.</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">         </span>* @param {string} hazard - The specific hazard to base the policy on.</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">async</span><span class="s1"> </span><span class="s7">function</span><span class="s1"> generatePolicyDraft(hazard) {</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s4"> apiUrl = </span><span class="s1">`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=</span><span class="s4">${apiKey}</span><span class="s1">`</span><span class="s4">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> maxRetries = </span><span class="s12">3</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">let</span><span class="s1"> attempt = </span><span class="s12">0</span><span class="s1">;</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s4"> systemPrompt = </span><span class="s1">`You are a corporate Health and Safety officer. Your task is to draft a concise, clear, and professional internal safety notice or policy guidance. The output must use simple Markdown formatting (headings, bold, and bullet points) for immediate readability. Do not include any conversational introduction or conclusion.`</span><span class="s4">;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// The prompt ensures 'Portishead Open Air Pool &amp; Cafe' is used as the company name.</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s4"> userQuery = </span><span class="s1">`Draft an internal policy guidance document for the staff of Portishead Open Air Pool &amp; Cafe. The policy should address the high-priority hazard: "</span><span class="s4">${hazard}</span><span class="s1">". When drafting the policy, ensure that 'Portishead Open Air Pool &amp; Cafe' is consistently used as the official venue or company name. Structure the document with a clear Title, Policy Statement, and Key Staff Responsibilities.`</span><span class="s4">;</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> payload = {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>contents: [{ parts: [{ text: userQuery }] }],</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>systemInstruction: {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>parts: [{ text: systemPrompt }]</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>},</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> outputElement = document.getElementById(</span><span class="s9">'policy-output'</span><span class="s1">);</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>outputElement.innerHTML = </span><span class="s1">'&lt;div class="text-center py-8 text-gray-500 flex flex-col items-center"&gt;&lt;svg class="animate-spin h-8 w-8 text-indigo-500 mb-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"&gt;&lt;circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"&gt;&lt;/circle&gt;&lt;path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"&gt;&lt;/path&gt;&lt;/svg&gt; Generating policy draft (Attempt 1 of 3)...&lt;/div&gt;'</span><span class="s4">;</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">while</span><span class="s1"> (attempt &lt; maxRetries) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">try</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">const</span><span class="s1"> response = </span><span class="s7">await</span><span class="s1"> fetch(apiUrl, {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>method: </span><span class="s9">'POST'</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>headers: { </span><span class="s9">'Content-Type'</span><span class="s1">: </span><span class="s9">'application/json'</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>body: </span><span class="s14">JSON</span><span class="s1">.stringify(payload)</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>});</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">if</span><span class="s1"> (response.status === </span><span class="s12">429</span><span class="s1"> &amp;&amp; attempt &lt; maxRetries - </span><span class="s12">1</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">const</span><span class="s1"> delay = </span><span class="s14">Math</span><span class="s1">.pow(</span><span class="s12">2</span><span class="s1">, attempt) * </span><span class="s12">1000</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>attempt++;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                        </span>outputElement.innerHTML = </span><span class="s1">`&lt;div class="text-center py-8 text-gray-500"&gt;Rate limit hit. Retrying in </span><span class="s4">${delay / </span><span class="s12">1000</span><span class="s4">}</span><span class="s1">s... (Attempt </span><span class="s4">${attempt + </span><span class="s12">1</span><span class="s4">}</span><span class="s1"> of 3)&lt;/div&gt;`</span><span class="s4">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">await</span><span class="s1"> </span><span class="s7">new</span><span class="s1"> </span><span class="s14">Promise</span><span class="s1">(resolve =&gt; setTimeout(resolve, delay));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">continue</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">if</span><span class="s1"> (!response.ok) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">throw</span><span class="s1"> </span><span class="s7">new</span><span class="s1"> </span><span class="s14">Error</span><span class="s1">(</span><span class="s9">`API call failed with status: </span><span class="s1">${response.status}</span><span class="s9">`</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">const</span><span class="s1"> result = </span><span class="s7">await</span><span class="s1"> response.json();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">const</span><span class="s1"> text = result.candidates?.[</span><span class="s12">0</span><span class="s1">]?.content?.parts?.[</span><span class="s12">0</span><span class="s1">]?.text;</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">if</span><span class="s1"> (text) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>outputElement.innerHTML = simpleMarkdownToHtml(text);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>} </span><span class="s7">else</span><span class="s1"> {</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s7">throw</span><span class="s4"> </span><span class="s7">new</span><span class="s4"> </span><span class="s14">Error</span><span class="s4">(</span><span class="s1">"API response was valid but contained no generated text."</span><span class="s4">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>} </span><span class="s7">catch</span><span class="s1"> (error) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>console.error(</span><span class="s9">"Gemini API Error:"</span><span class="s1">, error);</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                    </span>outputElement.innerHTML = </span><span class="s1">`&lt;p class="text-red-500 p-4 rounded-lg bg-red-50 border border-red-200"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;strong class="font-semibold"&gt;Generation Failed:&lt;/strong&gt; Could not retrieve policy draft. Error details logged to console.</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/p&gt;`</span><span class="s4">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// --- UI &amp; Rendering Functions ---</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Modal controls</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">function</span><span class="s1"> showPolicyModal(hazard) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s9">'policy-modal-title'</span><span class="s1">).textContent = </span><span class="s9">`✨ Draft Policy for: </span><span class="s1">${hazard}</span><span class="s9">`</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s9">'policy-modal'</span><span class="s1">).classList.remove(</span><span class="s9">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>generatePolicyDraft(hazard);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">function</span><span class="s1"> closePolicyModal() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s9">'policy-modal'</span><span class="s1">).classList.add(</span><span class="s9">'hidden'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(</span><span class="s9">'policy-output'</span><span class="s1">).innerHTML = </span><span class="s9">''</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s13">/**</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">         </span>* Renders the risk register cards based on the provided data.</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">         </span>* @param {Array&lt;Object&gt;} data - The risk register data array.</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">function</span><span class="s1"> renderRiskRegister(data) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> container = document.getElementById(</span><span class="s9">'risk-register-container'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">if</span><span class="s1"> (!container) </span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>container.innerHTML = data.map(risk =&gt; {</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Escape single quotes for use in inline onclick function</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">const</span><span class="s1"> escapedHazard = risk.hazard.replace(</span><span class="s6">/'/</span><span class="s7">g</span><span class="s1">, </span><span class="s9">"\\'"</span><span class="s1">);<span class="Apple-converted-space"> </span></span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s7">let</span><span class="s4"> riskClass = </span><span class="s1">'bg-white border-left border-gray-400'</span><span class="s4">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">let</span><span class="s1"> scoreColor = </span><span class="s9">'text-gray-600'</span><span class="s1">;</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">if</span><span class="s1"> (risk.score &gt;= </span><span class="s12">11</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>riskClass = </span><span class="s9">'risk-high'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>scoreColor = </span><span class="s9">'text-red-600'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>} </span><span class="s7">else</span><span class="s1"> </span><span class="s7">if</span><span class="s1"> (risk.score &gt;= </span><span class="s12">6</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>riskClass = </span><span class="s9">'risk-medium'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>scoreColor = </span><span class="s9">'text-amber-600'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">return</span><span class="s1"> </span><span class="s9">`</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="p-5 rounded-xl shadow-md transition hover:shadow-lg </span><span class="s4">${riskClass}</span><span class="s1">"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="flex justify-between items-start mb-3"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;span class="text-xl font-bold </span><span class="s4">${scoreColor}</span><span class="s1">"&gt;</span><span class="s4">${risk.ref}</span><span class="s1">&lt;/span&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;span class="text-3xl font-extrabold </span><span class="s4">${scoreColor}</span><span class="s1">"&gt;</span><span class="s4">${risk.score}</span><span class="s1">&lt;/span&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p10"><span class="s1"><span class="Apple-converted-space">                        </span></span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;h3 class="text-xl font-semibold text-gray-800 mb-2"&gt;</span><span class="s4">${risk.hazard}</span><span class="s1">&lt;/h3&gt;</span></p>
<p class="p10"><span class="s1"><span class="Apple-converted-space">                        </span></span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="text-sm space-y-3"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;p&gt;&lt;strong&gt;Risk Level:&lt;/strong&gt; &lt;span class="font-semibold"&gt;</span><span class="s4">${risk.rating}</span><span class="s1">&lt;/span&gt;&lt;/p&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;p&gt;&lt;strong&gt;L/S:&lt;/strong&gt; </span><span class="s4">${risk.likelihood}</span><span class="s1">/</span><span class="s4">${risk.severity}</span><span class="s1"> (Likelihood/Severity)&lt;/p&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;p&gt;&lt;strong&gt;At Risk:&lt;/strong&gt; </span><span class="s4">${risk.atRisk}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p10"><span class="s1"><span class="Apple-converted-space">                            </span></span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;details class="p-2 bg-gray-50 rounded-lg"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;summary class="font-medium cursor-pointer text-gray-700"&gt;Current Controls&lt;/summary&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;p class="mt-1 pl-2 text-gray-600"&gt;</span><span class="s4">${risk.controls}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/details&gt;</span></p>
<p class="p10"><span class="s1"><span class="Apple-converted-space">                            </span></span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;details class="p-2 bg-sky-50 rounded-lg"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;summary class="font-medium cursor-pointer text-sky-700"&gt;Recommended Action&lt;/summary&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;p class="mt-1 pl-2 text-gray-600"&gt;</span><span class="s4">${risk.recommendedAction}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/details&gt;</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;!-- GEMINI INTEGRATION BUTTON --&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button onclick="showPolicyModal('</span><span class="s4">${escapedHazard}</span><span class="s1">')"</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>class="mt-4 w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg shadow-lg transition duration-150 ease-in-out flex items-center justify-center"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>✨ Draft Internal Safety Policy</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/button&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span>`</span><span class="s4">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}).join(</span><span class="s9">''</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s13">/**</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">         </span>* Renders the action plan cards based on the provided data.</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">         </span>* @param {Array&lt;Object&gt;} data - The action plan data array.</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">function</span><span class="s1"> renderActionPlan(data) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> container = document.getElementById(</span><span class="s9">'action-plan-container'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">if</span><span class="s1"> (!container) </span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>container.innerHTML = data.map(action =&gt; </span><span class="s9">`</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="p-4 rounded-xl shadow-sm border border-gray-200 action-card action-ongoing"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-2 border-b pb-2"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;h4 class="text-lg font-bold text-sky-800"&gt;</span><span class="s4">${action.ref}</span><span class="s1"> - </span><span class="s4">${action.hazard.split(</span><span class="s1">'('</span><span class="s4">)[</span><span class="s12">0</span><span class="s4">].trim()}</span><span class="s1">&lt;/h4&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;span class="text-sm font-semibold text-gray-600 px-3 py-1 rounded-full bg-yellow-100"&gt;</span><span class="s4">${action.status}</span><span class="s1">&lt;/span&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p10"><span class="s1"><span class="Apple-converted-space">                    </span></span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;p class="text-gray-700 mb-3"&gt;</span><span class="s4">${action.action}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p10"><span class="s1"><span class="Apple-converted-space">                    </span></span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex flex-wrap gap-x-6 gap-y-2 text-sm text-gray-500"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;p&gt;&lt;span class="font-medium text-gray-800"&gt;Responsible:&lt;/span&gt; </span><span class="s4">${action.responsibility}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;p&gt;&lt;span class="font-medium text-gray-800"&gt;Target:&lt;/span&gt; </span><span class="s4">${action.targetDate}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">            </span>`</span><span class="s4">).join(</span><span class="s1">''</span><span class="s4">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// --- Event Handlers ---</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Risk Filter Logic</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>document.getElementById(</span><span class="s9">'risk-filter'</span><span class="s1">).addEventListener(</span><span class="s9">'change'</span><span class="s1">, (e) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> filterValue = e.target.value;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">let</span><span class="s1"> filteredRisks = riskRegisterData;</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">if</span><span class="s1"> (filterValue === </span><span class="s9">'high'</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>filteredRisks = riskRegisterData.filter(risk =&gt; risk.score &gt;= </span><span class="s12">11</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s7">else</span><span class="s1"> </span><span class="s7">if</span><span class="s1"> (filterValue === </span><span class="s9">'medium'</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>filteredRisks = riskRegisterData.filter(risk =&gt; risk.score &gt;= </span><span class="s12">6</span><span class="s1"> &amp;&amp; risk.score &lt;= </span><span class="s12">10</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>renderRiskRegister(filteredRisks);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Action Search Logic</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>document.getElementById(</span><span class="s9">'action-search'</span><span class="s1">).addEventListener(</span><span class="s9">'input'</span><span class="s1">, (e) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> searchTerm = e.target.value.toLowerCase();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> filteredActions = actionPlanData.filter(action =&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>action.ref.toLowerCase().includes(searchTerm) ||</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>action.responsibility.toLowerCase().includes(searchTerm) ||</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>action.action.toLowerCase().includes(searchTerm)</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>renderActionPlan(filteredActions);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Initial load</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>window.onload = () =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>renderRiskRegister(riskRegisterData);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>renderActionPlan(actionPlanData);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>};</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p9"><span class="s11"></span><br></p>
<p class="p2"><span class="s3">&lt;/</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s3">&lt;/</span><span class="s1">html</span><span class="s3">&gt;</span></p>
<p class="p9"><span class="s11"></span><br></p>
</body>
</html>
